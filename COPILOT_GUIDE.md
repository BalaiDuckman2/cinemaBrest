# ü§ñ Guide d'Utilisation de GitHub Copilot - Cin√©Brest

## üìã Commandes Personnalis√©es Disponibles

GitHub Copilot a √©t√© configur√© avec des instructions personnalis√©es pour ce projet. Voici comment les utiliser :

### üßπ `/clean_code` - Nettoyer le Code et le Workspace

**Usage** : Dans Copilot Chat, tapez `/clean_code` pour un nettoyage complet du workspace.

**Exemples** :
```
/clean_code                    # Nettoie tout le workspace
/clean_code app.py             # Nettoie uniquement app.py
/clean_code modules/           # Nettoie tous les fichiers du dossier modules/
```

**Actions effectu√©es** :

#### üìÇ Phase 1 - Analyse du Workspace
- ‚úÖ Scan de tous les fichiers du projet
- ‚úÖ D√©tection des fichiers dupliqu√©s (MD5)
- ‚úÖ D√©tection des assets inutilis√©s (images, fonts, CSS)
- ‚úÖ D√©tection des fichiers temporaires (.pyc, __pycache__)
- ‚úÖ D√©tection de la documentation redondante

#### üóëÔ∏è Phase 2 - Nettoyage des Fichiers
- ‚úÖ Suppression des fichiers temporaires Python
- ‚úÖ Suppression des fichiers dupliqu√©s
- ‚úÖ Suppression des images/assets non r√©f√©renc√©s
- ‚úÖ Suppression des dossiers vides
- ‚úÖ Suppression des backups (.bak, .old, ~)
- ‚úÖ Consolidation de la documentation

#### üêç Phase 3 - Nettoyage du Code Python
- ‚úÖ Suppression des imports inutilis√©s
- ‚úÖ R√©organisation des imports (stdlib ‚Üí third-party ‚Üí local)
- ‚úÖ Suppression des variables non utilis√©es
- ‚úÖ Suppression des fonctions mortes (jamais appel√©es)
- ‚úÖ Formatage PEP 8 (4 espaces, 79 caract√®res max)
- ‚úÖ Ajout des type hints manquants
- ‚úÖ V√©rification/ajout des docstrings (format Google)
- ‚úÖ Suppression des print() de debug
- ‚úÖ Suppression des lignes vides en trop (max 2 cons√©cutives)
- ‚úÖ Suppression des commentaires inutiles

#### üìú Phase 4 - Nettoyage du Code JavaScript
- ‚úÖ Suppression des fonctions dupliqu√©es
- ‚úÖ Suppression des variables non utilis√©es
- ‚úÖ Suppression des event listeners orphelins
- ‚úÖ Optimisation des querySelector r√©p√©t√©s
- ‚úÖ Suppression des console.log() de debug
- ‚úÖ Suppression des lignes vides en trop

#### üåê Phase 5 - Nettoyage des Templates HTML
- ‚úÖ Suppression des classes CSS non utilis√©es
- ‚úÖ Suppression des attributs vides (class="", style="")
- ‚úÖ Suppression des commentaires HTML inutiles
- ‚úÖ Optimisation des balises r√©p√©t√©es
- ‚úÖ V√©rification des liens cass√©s

#### üìä Phase 6 - Rapport Final
- ‚úÖ R√©sum√© des actions effectu√©es
- ‚úÖ Liste des fichiers supprim√©s
- ‚úÖ Espace disque lib√©r√©
- ‚úÖ Optimisations suppl√©mentaires propos√©es
- ‚úÖ Cr√©ation d'un rapport d√©taill√© (CLEAN_REPORT.md)

**‚ö†Ô∏è Important** : Toujours faire un commit Git AVANT de lancer `/clean_code` !

---

### üóÑÔ∏è `/optimize_db` - Optimiser la Base de Donn√©es

**Usage** :
```
/optimize_db
```

**Actions effectu√©es** :
1. ‚úÖ V√©rification des index SQLite
2. ‚úÖ Optimisation des requ√™tes (EXPLAIN QUERY PLAN)
3. ‚úÖ Ajout d'index manquants
4. ‚úÖ V√©rification du TTL du cache
5. ‚úÖ Nettoyage des anciennes donn√©es

---

### üì± `/fix_pwa` - Corriger la PWA

**Usage** :
```
/fix_pwa
```

**Actions effectu√©es** :
1. ‚úÖ V√©rification du manifest.json
2. ‚úÖ Correction du service worker (urlsToCache)
3. ‚úÖ V√©rification des ic√¥nes PWA (192x192, 512x512)
4. ‚úÖ Test de l'installabilit√©
5. ‚úÖ V√©rification de la strat√©gie de cache

---

### ‚ú® `/add_feature` - Ajouter une Fonctionnalit√©

**Usage** :
```
/add_feature Ajouter un filtre par r√©alisateur
```

**Actions effectu√©es** :
1. ‚úÖ Analyse de la demande
2. ‚úÖ Identification des fichiers √† modifier
3. ‚úÖ Proposition d'architecture
4. ‚úÖ Impl√©mentation avec tests
5. ‚úÖ Mise √† jour de la documentation

---

### üê≥ `/docker_check` - V√©rifier Docker

**Usage** :
```
/docker_check
```

**Actions effectu√©es** :
1. ‚úÖ V√©rification du Dockerfile
2. ‚úÖ Optimisation des layers
3. ‚úÖ V√©rification du .dockerignore
4. ‚úÖ Test du build local
5. ‚úÖ V√©rification du docker-compose.yml

---

### üîí `/security_audit` - Audit de S√©curit√©

**Usage** :
```
/security_audit
```

**Actions effectu√©es** :
1. ‚úÖ V√©rification des variables d'environnement (.env)
2. ‚úÖ V√©rification de l'absence de credentials en dur
3. ‚úÖ V√©rification des d√©pendances (pip list)
4. ‚úÖ Proposition de rate limiting
5. ‚úÖ V√©rification des headers de s√©curit√©

---

## üéØ Comment Utiliser les Commandes

### M√©thode 1 : Copilot Chat (Recommand√©)

1. **Ouvrir Copilot Chat** : `Ctrl+Alt+I` (Windows) ou `Cmd+Shift+I` (Mac)
2. **Taper la commande** : `/clean_code app.py`
3. **Valider** : Appuyez sur Entr√©e
4. **Suivre les suggestions** : Copilot va proposer les modifications

### M√©thode 2 : Inline Chat

1. **S√©lectionner le code** √† nettoyer
2. **Ouvrir Inline Chat** : `Ctrl+I` (Windows) ou `Cmd+I` (Mac)
3. **Taper** : `clean this code according to project guidelines`
4. **Valider** : Copilot appliquera les r√®gles du projet

### M√©thode 3 : Commentaire Magique

Dans votre code Python, tapez :
```python
# TODO: clean_code
```

Puis demandez √† Copilot de suivre les instructions du projet.

---

## üìö R√®gles Automatiques

Copilot appliquera automatiquement ces r√®gles quand vous codez :

### Python
- ‚úÖ PEP 8 strict (4 espaces)
- ‚úÖ Type hints partout
- ‚úÖ Docstrings format Google
- ‚úÖ Imports group√©s et tri√©s
- ‚úÖ Logging avec emojis (üé¨, ‚úì, ‚ö†Ô∏è, ‚ùå)

### JavaScript
- ‚úÖ Vanilla JS uniquement (pas de frameworks)
- ‚úÖ camelCase pour les variables
- ‚úÖ `querySelector` pr√©f√©r√© √† `getElementById`
- ‚úÖ V√©rification localStorage avant usage

### CSS
- ‚úÖ **Tailwind CSS uniquement** (pas de custom CSS)
- ‚úÖ Classes responsive (`sm:`, `md:`, `lg:`)
- ‚úÖ Palette indigo pour le th√®me

---

## üöÄ Exemples Pratiques

### Exemple 1 : Nettoyage Complet du Workspace

**Commande** :
```
/clean_code
```

**R√©sultat** :
```
üîç Analyse du workspace...

üìÇ Fichiers trouv√©s :
- Total : 35 fichiers
- Python : 8 fichiers
- JavaScript : 1 fichier (dans templates)
- HTML : 2 fichiers
- Images : 7 fichiers
- Autres : 17 fichiers

üóëÔ∏è Fichiers √† supprimer :
- __pycache__/ (3 fichiers, 45 KB)
- static/images/old_logo.png (non r√©f√©renc√©, 120 KB)
- CLEANUP_SUMMARY.md (temporaire, 15 KB)
- README_OLD.md (duplicata, 8 KB)

üêç Code Python :
- app.py : 3 imports inutilis√©s, 2 variables non utilis√©es
- modules/api.py : 5 lignes vides en trop
- modules/database.py : 2 docstrings manquants

üìú Code JavaScript :
- templates/index.html : 2 console.log() √† supprimer
- 1 fonction dupliqu√©e (filterByVersion)

üåê Templates HTML :
- base.html : 5 classes Tailwind non utilis√©es
- index.html : 3 commentaires obsol√®tes

‚úÖ Nettoyage effectu√© !
üìä Espace lib√©r√© : 188 KB
üìÑ Rapport d√©taill√© : CLEAN_REPORT.md
```

### Exemple 2 : Nettoyer un Fichier Sp√©cifique

**Avant** :
```python
from flask import Flask, render_template, request
import requests
from datetime import datetime, timedelta
import time

unused_var = "test"

def get_movies():
    movies = []
    for i in range(10):
        movies.append(i)
    return movies
```

**Commande** :
```
/clean_code app.py
```

**Apr√®s** :
```python
from datetime import datetime, timedelta

from flask import Flask, render_template, request
import requests

from modules.api import Theater
from modules.database import db


def get_movies() -> list[int]:
    """R√©cup√®re la liste des films.
    
    Returns:
        list[int]: Liste des IDs de films
    """
    return list(range(10))
```

### Exemple 2 : Ajouter une Feature

**Commande** :
```
/add_feature Ajouter un bouton pour exporter les s√©ances en PDF
```

**R√©ponse Copilot** :
```
Je vais ajouter cette fonctionnalit√© en plusieurs √©tapes :

1. **Backend (app.py)** :
   - Nouvelle route `/export_pdf`
   - Utilisation de `reportlab` pour g√©n√©rer le PDF

2. **Frontend (index.html)** :
   - Bouton "Exporter en PDF" avec ic√¥ne
   - Tailwind : `bg-indigo-600 hover:bg-indigo-700`

3. **D√©pendances (requirements.txt)** :
   - Ajouter `reportlab==4.0.7`

Voulez-vous que je proc√®de ?
```

---

## üí° Astuces

### 1. Utiliser le Contexte

Copilot comprend mieux avec du contexte :
```
@workspace /clean_code app.py en suivant les r√®gles PEP 8 du projet
```

### 2. R√©f√©rencer d'Autres Fichiers

```
Ajoute une fonction similaire √† celle dans modules/api.py
```

### 3. Demander des Explications

```
Explique-moi le cache 3 niveaux dans ce projet
```

### 4. Corriger les Erreurs

```
/fix_pwa Le service worker ne charge pas les images
```

---

## üîß Configuration Avanc√©e

### Modifier les Instructions

Les instructions personnalis√©es sont dans :
```
.github/copilot-instructions.md
```

Pour ajouter une nouvelle commande :

1. Ouvrir `.github/copilot-instructions.md`
2. Ajouter une section `#### /ma_commande`
3. D√©crire les actions √† effectuer
4. Sauvegarder

**Exemple** :
```markdown
#### `/test`
1. V√©rifier que les tests existent
2. Lancer pytest
3. Afficher le coverage
4. Proposer des tests manquants
```

### Param√®tres VS Code

Les param√®tres Copilot sont dans :
```
.vscode/settings.json
```

---

## üìñ Documentation Compl√®te

- **Instructions du projet** : `.github/copilot-instructions.md`
- **Architecture** : `ARCHITECTURE.md`
- **Scripts utiles** : `scripts.md`
- **README principal** : `README.md`

---

## üÜò Aide Rapide

**Commande** | **Usage** | **Exemple**
---|---|---
`/clean_code` | Nettoyer workspace complet | `/clean_code` ou `/clean_code app.py`
`/optimize_db` | Optimiser SQLite | `/optimize_db`
`/fix_pwa` | Corriger la PWA | `/fix_pwa`
`/add_feature` | Nouvelle feature | `/add_feature filtrer par genre`
`/docker_check` | V√©rifier Docker | `/docker_check`
`/security_audit` | Audit s√©curit√© | `/security_audit`

### üßπ D√©tails `/clean_code`

**Option** | **Description**
---|---
`/clean_code` | Nettoie tout le workspace (fichiers + code)
`/clean_code app.py` | Nettoie uniquement app.py
`/clean_code modules/` | Nettoie tous les fichiers du dossier modules/
`/clean_code --dry-run` | Affiche ce qui serait nettoy√© sans rien modifier

**Actions** :
- üóëÔ∏è Supprime fichiers temporaires (__pycache__, .pyc)
- üóëÔ∏è Supprime fichiers dupliqu√©s (MD5)
- üóëÔ∏è Supprime assets non r√©f√©renc√©s (images, fonts)
- üóëÔ∏è Supprime dossiers vides
- üêç Nettoie code Python (imports, variables, PEP 8)
- üìú Nettoie JavaScript (fonctions dupliqu√©es, console.log)
- üåê Nettoie HTML (classes inutilis√©es, commentaires)
- üìä G√©n√®re rapport CLEAN_REPORT.md

---

**Bon d√©veloppement avec Copilot ! üöÄ**
